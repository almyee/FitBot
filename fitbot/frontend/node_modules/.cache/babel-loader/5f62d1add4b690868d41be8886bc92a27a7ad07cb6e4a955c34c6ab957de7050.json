{"ast":null,"code":"import { unpack } from '../../utils/index.js';\nimport multiplyMatrices from '../../utils/multiply-matrices.js';\nimport { rgb2xyz } from '../lab/rgb2lab.js';\nconst rgb2oklab = (...args) => {\n  const [r, g, b, ...rest] = unpack(args, 'rgb');\n  const xyz = rgb2xyz(r, g, b);\n  const oklab = XYZ_to_OKLab(xyz);\n  return [...oklab, ...(rest.length > 0 && rest[0] < 1 ? [rest[0]] : [])];\n};\n\n// from https://www.w3.org/TR/css-color-4/#color-conversion-code\nfunction XYZ_to_OKLab(XYZ) {\n  // Given XYZ relative to D65, convert to OKLab\n  const XYZtoLMS = [[0.819022437996703, 0.3619062600528904, -0.1288737815209879], [0.0329836539323885, 0.9292868615863434, 0.0361446663506424], [0.0481771893596242, 0.2642395317527308, 0.6335478284694309]];\n  const LMStoOKLab = [[0.210454268309314, 0.7936177747023054, -0.0040720430116193], [1.9779985324311684, -2.4285922420485799, 0.450593709617411], [0.0259040424655478, 0.7827717124575296, -0.8086757549230774]];\n  const LMS = multiplyMatrices(XYZtoLMS, XYZ);\n  // JavaScript Math.cbrt returns a sign-matched cube root\n  // beware if porting to other languages\n  // especially if tempted to use a general power function\n  return multiplyMatrices(LMStoOKLab, LMS.map(c => Math.cbrt(c)));\n  // L in range [0,1]. For use in CSS, multiply by 100 and add a percent\n}\nexport default rgb2oklab;","map":{"version":3,"names":["unpack","multiplyMatrices","rgb2xyz","rgb2oklab","args","r","g","b","rest","xyz","oklab","XYZ_to_OKLab","length","XYZ","XYZtoLMS","LMStoOKLab","LMS","map","c","Math","cbrt"],"sources":["/Users/alyssayee/Library/Mobile Documents/com~apple~CloudDocs/School/College/UCD/Classes/ECS 273/github/FitBot/fitbot/node_modules/chroma-js/src/io/oklab/rgb2oklab.js"],"sourcesContent":["import { unpack } from '../../utils/index.js';\nimport multiplyMatrices from '../../utils/multiply-matrices.js';\nimport { rgb2xyz } from '../lab/rgb2lab.js';\n\nconst rgb2oklab = (...args) => {\n    const [r, g, b, ...rest] = unpack(args, 'rgb');\n    const xyz = rgb2xyz(r, g, b);\n    const oklab = XYZ_to_OKLab(xyz);\n    return [...oklab, ...(rest.length > 0 && rest[0] < 1 ? [rest[0]] : [])];\n};\n\n// from https://www.w3.org/TR/css-color-4/#color-conversion-code\nfunction XYZ_to_OKLab(XYZ) {\n    // Given XYZ relative to D65, convert to OKLab\n    const XYZtoLMS = [\n        [0.819022437996703, 0.3619062600528904, -0.1288737815209879],\n        [0.0329836539323885, 0.9292868615863434, 0.0361446663506424],\n        [0.0481771893596242, 0.2642395317527308, 0.6335478284694309]\n    ];\n    const LMStoOKLab = [\n        [0.210454268309314, 0.7936177747023054, -0.0040720430116193],\n        [1.9779985324311684, -2.4285922420485799, 0.450593709617411],\n        [0.0259040424655478, 0.7827717124575296, -0.8086757549230774]\n    ];\n\n    const LMS = multiplyMatrices(XYZtoLMS, XYZ);\n    // JavaScript Math.cbrt returns a sign-matched cube root\n    // beware if porting to other languages\n    // especially if tempted to use a general power function\n    return multiplyMatrices(\n        LMStoOKLab,\n        LMS.map((c) => Math.cbrt(c))\n    );\n    // L in range [0,1]. For use in CSS, multiply by 100 and add a percent\n}\n\nexport default rgb2oklab;\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,sBAAsB;AAC7C,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,SAASC,OAAO,QAAQ,mBAAmB;AAE3C,MAAMC,SAAS,GAAGA,CAAC,GAAGC,IAAI,KAAK;EAC3B,MAAM,CAACC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE,GAAGC,IAAI,CAAC,GAAGR,MAAM,CAACI,IAAI,EAAE,KAAK,CAAC;EAC9C,MAAMK,GAAG,GAAGP,OAAO,CAACG,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC;EAC5B,MAAMG,KAAK,GAAGC,YAAY,CAACF,GAAG,CAAC;EAC/B,OAAO,CAAC,GAAGC,KAAK,EAAE,IAAIF,IAAI,CAACI,MAAM,GAAG,CAAC,IAAIJ,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAACA,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;AAC3E,CAAC;;AAED;AACA,SAASG,YAAYA,CAACE,GAAG,EAAE;EACvB;EACA,MAAMC,QAAQ,GAAG,CACb,CAAC,iBAAiB,EAAE,kBAAkB,EAAE,CAAC,kBAAkB,CAAC,EAC5D,CAAC,kBAAkB,EAAE,kBAAkB,EAAE,kBAAkB,CAAC,EAC5D,CAAC,kBAAkB,EAAE,kBAAkB,EAAE,kBAAkB,CAAC,CAC/D;EACD,MAAMC,UAAU,GAAG,CACf,CAAC,iBAAiB,EAAE,kBAAkB,EAAE,CAAC,kBAAkB,CAAC,EAC5D,CAAC,kBAAkB,EAAE,CAAC,kBAAkB,EAAE,iBAAiB,CAAC,EAC5D,CAAC,kBAAkB,EAAE,kBAAkB,EAAE,CAAC,kBAAkB,CAAC,CAChE;EAED,MAAMC,GAAG,GAAGf,gBAAgB,CAACa,QAAQ,EAAED,GAAG,CAAC;EAC3C;EACA;EACA;EACA,OAAOZ,gBAAgB,CACnBc,UAAU,EACVC,GAAG,CAACC,GAAG,CAAEC,CAAC,IAAKC,IAAI,CAACC,IAAI,CAACF,CAAC,CAAC,CAC/B,CAAC;EACD;AACJ;AAEA,eAAef,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}